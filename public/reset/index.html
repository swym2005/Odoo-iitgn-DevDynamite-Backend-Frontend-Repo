<!doctype html><html lang="en"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>OrbitOne — Set New Password</title><link href="/assets/css/dashboard.css" rel="stylesheet"/><link href="/styles.css" rel="stylesheet"/></head><body><div class="layout"><main style="margin:auto;max-width:420px;width:100%"><div class="table-card" style="padding:1.4rem"><h2>Choose a new password</h2><p class="muted" id="rpMsg">Validating link…</p><form id="rpForm" style="display:none"><label>New Password</label><input id="rpPass" type="password" minlength="6" required/><label>Confirm Password</label><input id="rpPass2" type="password" minlength="6" required/><div class="space-between" style="margin-top:1rem"><a href="/" class="button-outline">Cancel</a><button class="button-primary" type="submit">Update</button></div></form></div></main></div><script>(function(){ const token=window.location.pathname.split('/').pop(); const msg=document.getElementById('rpMsg'); const form=document.getElementById('rpForm'); fetch('/auth/reset/'+token).then(r=>r.json()).then(d=>{ if(d.success){ msg.textContent='Link valid. Enter a new password.'; form.style.display='block'; } else { msg.textContent=d.message||'Invalid or expired link.'; } }).catch(()=> msg.textContent='Invalid or expired link.'); form.addEventListener('submit', async e=>{ e.preventDefault(); if(rpPass.value!==rpPass2.value){ msg.textContent='Passwords must match.'; return; } msg.textContent='Updating…'; try{ const res=await fetch('/auth/reset/'+token,{ method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({ password: rpPass.value }) }); const data=await res.json(); if(!data.success) throw new Error(data.message||'Failed'); msg.textContent='Password updated. You can login now.'; form.remove(); }catch(err){ msg.textContent=err.message; } }); })(); </script></body></html>